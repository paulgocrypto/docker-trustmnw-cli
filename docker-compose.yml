version: '3'

services:
  trustmnw:
    container_name: trustmnw
    restart: unless-stopped
    image: pazion/trustmnw-cli:latest
#    build: .
    tty: true
    networks:
      - web
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /storage/trustmnw/data/home:/home
      - /storage/trustmnw/data/tmp:/tmp/node/trustmnw-cli
    healthcheck:
      test: grep -c '\"connected\":true' /tmp/node/trustmnw-cli/trustmnw-stats.json
      start_period: 20s
      interval: 30s
      timeout: 3s
      retries: 5
    command: bash -c "/usr/local/bin/trustmnw-cli restart && bash"

networks:
  web:
    external: true
